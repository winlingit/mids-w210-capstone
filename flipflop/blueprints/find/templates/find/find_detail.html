{% extends 'layouts/app.html' %}
{% import "macros/form.html" as f with context %}

{% block title %}Engage{% endblock %}
{% block meta_description %}Holding Congress accountable{% endblock %}

{% block body %}

<section class="content-section-b">
   <div class="container">
    <div class="row">
       <div class="col-sm-12 spacer-10">
          <a href="{{ url_for('find.find_page') }}"><< Back to Engage Your Legislators</a>
          <h2>{{ member_info.mem_type }} {{ member_info.first_name }} {{ member_info.last_name }}</h2>
       </div>
     </div>
     <div class="row spacer-10">
      <div class="col-md-6">
        <h3>Member Details</h3>
        <ul class="lead">
          <li><b>Member Source: </b><p><a href="{{ member_info.url }}">{{ member_info.url }}</a></p></li>
          <li><b></b><p>{{ member_info.party }}, {{ member_info.state_abbrev }}, District {{ member_info.district }}</p></li>
          <li><b>Recent Votes: </b>
          	<p>
            {%- for vote in votes %}
              <a href="{{ vote.url }}">
              Voted {{ vote.vote_position }} on {{ vote.bill_id}}
              </a>
          </p>
            {%- endfor %}
          </li>
        </ul>
      </div>
      <div class="col-md-6">
        <h3>Predicted Votes on Upcoming Bills</h3>
        <h5>Positions for On Passage Votes</h5>
        <table class="table table-hover">
            <thead>
            <tr>
              <th>BILL</th>
              <th>PREDICTED VOTE</th>
              <th>SWING PROBABILITY</th>
            </tr>
            </thead>
          <tbody id="myTable">
            {%- for prediction in top_predictions %}
            <tr>
              <td><a href="{{ url_for('find.find_page', member_id=prediction.Member.member_id) }}">{{ prediction.Member.first_name }} {{ prediction.Member.last_name }}</a>
              </td>
              <td>{{ prediction.Model.position }}</td>
              <td>{{ 100*prediction.BillPrediction.pred_probs|round(3) }}%</td>
              <td>{{ prediction.Model.model }}</td>
            </tr>
            {%- endfor %}
          </tbody>
        </table>
     </div>

</div>
</section>
{% endblock %}
